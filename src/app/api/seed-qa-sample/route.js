import { NextResponse } from 'next/server';
import mysql from 'mysql2/promise';

// Database connection
const dbConfig = {
  host: process.env.DB_HOST,
  port: process.env.DB_PORT ? parseInt(process.env.DB_PORT) : 3306,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  database: process.env.DB_NAME
};

// à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ Q&A
const sampleQAItems = [
  {
    category_name: 'à¹€à¸­à¸à¸ªà¸²à¸£à¸£à¸²à¸Šà¸à¸²à¸£',
    question: 'à¸‚à¸­à¹ƒà¸šà¸£à¸±à¸šà¸£à¸­à¸‡à¸à¸²à¸£à¹„à¸¡à¹ˆà¸¡à¸µà¸«à¸™à¸µà¹‰à¸ªà¸´à¸™à¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¸­à¸°à¹„à¸£à¸šà¹‰à¸²à¸‡?',
    answer: `à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸‚à¸­à¹ƒà¸šà¸£à¸±à¸šà¸£à¸­à¸‡à¸à¸²à¸£à¹„à¸¡à¹ˆà¸¡à¸µà¸«à¸™à¸µà¹‰à¸ªà¸´à¸™à¸•à¹ˆà¸­à¹€à¸—à¸¨à¸šà¸²à¸¥ à¸—à¹ˆà¸²à¸™à¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¸”à¸±à¸‡à¸™à¸µà¹‰:

ðŸ“‹ à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡:
1. à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ (à¸‰à¸šà¸±à¸šà¸ˆà¸£à¸´à¸‡ + à¸ªà¸³à¹€à¸™à¸²)
2. à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸šà¹‰à¸²à¸™ (à¸‰à¸šà¸±à¸šà¸ˆà¸£à¸´à¸‡ + à¸ªà¸³à¹€à¸™à¸²)
3. à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸¡à¸­à¸šà¸­à¸³à¸™à¸²à¸ˆ (à¸à¸£à¸“à¸µà¸¡à¸²à¹à¸—à¸™) à¸žà¸£à¹‰à¸­à¸¡à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™à¸œà¸¹à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸­à¸³à¸™à¸²à¸ˆ
4. à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡ 20 à¸šà¸²à¸—

â° à¹€à¸§à¸¥à¸²à¸—à¸³à¸à¸²à¸£:
à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œ-à¸§à¸±à¸™à¸¨à¸¸à¸à¸£à¹Œ à¹€à¸§à¸¥à¸² 08:30-16:30 à¸™. (à¸«à¸¢à¸¸à¸”à¸žà¸±à¸à¹€à¸—à¸µà¹ˆà¸¢à¸‡ 12:00-13:00 à¸™.)

ðŸ“ž à¸•à¸´à¸”à¸•à¹ˆà¸­à¸ªà¸­à¸šà¸–à¸²à¸¡:
à¹‚à¸—à¸£. 038-123456 à¸«à¸£à¸·à¸­à¸¡à¸²à¸—à¸µà¹ˆà¹€à¸„à¸²à¸™à¹Œà¹€à¸•à¸­à¸£à¹Œà¸šà¸£à¸´à¸à¸²à¸£à¸Šà¸±à¹‰à¸™ 1

âš¡ à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¸›à¸£à¸°à¸¡à¸²à¸“ 15-30 à¸™à¸²à¸—à¸µ`,
    tags: 'à¹ƒà¸šà¸£à¸±à¸šà¸£à¸­à¸‡, à¹€à¸­à¸à¸ªà¸²à¸£, à¸«à¸™à¸µà¹‰à¸ªà¸´à¸™',
    is_featured: true,
    display_order: 1
  },
  {
    category_name: 'à¸šà¸£à¸´à¸à¸²à¸£à¸—à¸±à¹ˆà¸§à¹„à¸›',
    question: 'à¹€à¸—à¸¨à¸šà¸²à¸¥à¸•à¸³à¸šà¸¥à¸šà¹‰à¸²à¸™à¹‚à¸žà¸˜à¸´à¹Œà¹€à¸›à¸´à¸”à¸—à¸³à¸à¸²à¸£à¸§à¸±à¸™à¹„à¸«à¸™à¸šà¹‰à¸²à¸‡?',
    answer: `ðŸ• à¹€à¸§à¸¥à¸²à¸—à¸³à¸à¸²à¸£à¸‚à¸­à¸‡à¹€à¸—à¸¨à¸šà¸²à¸¥à¸•à¸³à¸šà¸¥à¸šà¹‰à¸²à¸™à¹‚à¸žà¸˜à¸´à¹Œ:

ðŸ“… à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œ - à¸§à¸±à¸™à¸¨à¸¸à¸à¸£à¹Œ
â° à¹€à¸§à¸¥à¸² 08:30 - 16:30 à¸™.
ðŸ½ï¸ à¸žà¸±à¸à¹€à¸—à¸µà¹ˆà¸¢à¸‡ 12:00 - 13:00 à¸™.

âŒ à¸§à¸±à¸™à¸«à¸¢à¸¸à¸”:
- à¸§à¸±à¸™à¹€à¸ªà¸²à¸£à¹Œ - à¸§à¸±à¸™à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ
- à¸§à¸±à¸™à¸«à¸¢à¸¸à¸”à¸£à¸²à¸Šà¸à¸²à¸£
- à¸§à¸±à¸™à¸«à¸¢à¸¸à¸”à¸™à¸±à¸à¸‚à¸±à¸•à¸¤à¸à¸©à¹Œ

ðŸ“ž à¸•à¸´à¸”à¸•à¹ˆà¸­à¸™à¸­à¸à¹€à¸§à¸¥à¸²:
à¸à¸£à¸“à¸µà¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™ à¹‚à¸—à¸£. 038-123456 à¸•à¹ˆà¸­ 0`,
    tags: 'à¹€à¸§à¸¥à¸²à¸—à¸³à¸à¸²à¸£, à¸§à¸±à¸™à¸«à¸¢à¸¸à¸”, à¸•à¸´à¸”à¸•à¹ˆà¸­',
    is_featured: true,
    display_order: 2
  },
  {
    category_name: 'à¸ à¸²à¸©à¸µà¹à¸¥à¸°à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡',
    question: 'à¸Šà¸³à¸£à¸°à¸ à¸²à¸©à¸µà¸—à¸µà¹ˆà¸”à¸´à¸™à¹à¸¥à¸°à¸ªà¸´à¹ˆà¸‡à¸›à¸¥à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸”à¹‰à¸—à¸µà¹ˆà¹„à¸«à¸™à¸šà¹‰à¸²à¸‡?',
    answer: `ðŸ’° à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¸ à¸²à¸©à¸µà¸—à¸µà¹ˆà¸”à¸´à¸™à¹à¸¥à¸°à¸ªà¸´à¹ˆà¸‡à¸›à¸¥à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡:

ðŸ¢ à¸—à¸µà¹ˆà¹€à¸—à¸¨à¸šà¸²à¸¥à¸•à¸³à¸šà¸¥à¸šà¹‰à¸²à¸™à¹‚à¸žà¸˜à¸´à¹Œ:
- à¹€à¸„à¸²à¸™à¹Œà¹€à¸•à¸­à¸£à¹Œà¸šà¸£à¸´à¸à¸²à¸£à¸Šà¸±à¹‰à¸™ 1
- à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œ-à¸§à¸±à¸™à¸¨à¸¸à¸à¸£à¹Œ à¹€à¸§à¸¥à¸² 08:30-16:30 à¸™.

ðŸ¦ à¸˜à¸™à¸²à¸„à¸²à¸£à¸—à¸µà¹ˆà¸£à¹ˆà¸§à¸¡à¸šà¸£à¸´à¸à¸²à¸£:
- à¸˜à¸™à¸²à¸„à¸²à¸£à¸à¸£à¸¸à¸‡à¹„à¸—à¸¢
- à¸˜à¸™à¸²à¸„à¸²à¸£à¹„à¸—à¸¢à¸žà¸²à¸“à¸´à¸Šà¸¢à¹Œ
- à¸˜à¸™à¸²à¸„à¸²à¸£à¸à¸ªà¸´à¸à¸£à¹„à¸—à¸¢

ðŸ’³ à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ:
- à¹à¸­à¸›à¸žà¸¥à¸´à¹€à¸„à¸Šà¸±à¸™ Mobile Banking
- Internet Banking
- à¹€à¸„à¸²à¸™à¹Œà¹€à¸•à¸­à¸£à¹Œà¹€à¸‹à¸­à¸£à¹Œà¸§à¸´à¸ª (7-Eleven)

ðŸ“‹ à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸™à¸³à¸¡à¸²:
- à¹ƒà¸šà¹à¸ˆà¹‰à¸‡à¸ à¸²à¸©à¸µ
- à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™`,
    tags: 'à¸ à¸²à¸©à¸µ, à¸—à¸µà¹ˆà¸”à¸´à¸™, à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™',
    is_featured: false,
    display_order: 3
  },
  {
    category_name: 'à¸ªà¸²à¸˜à¸²à¸£à¸“à¸¹à¸›à¹‚à¸ à¸„',
    question: 'à¸™à¹‰à¸³à¸›à¸£à¸°à¸›à¸²à¹„à¸¡à¹ˆà¹„à¸«à¸¥à¸«à¸£à¸·à¸­à¹„à¸Ÿà¸Ÿà¹‰à¸²à¸”à¸±à¸šà¸•à¹‰à¸­à¸‡à¹à¸ˆà¹‰à¸‡à¸—à¸µà¹ˆà¹„à¸«à¸™?',
    answer: `âš¡ à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¸›à¸±à¸à¸«à¸²à¸ªà¸²à¸˜à¸²à¸£à¸“à¸¹à¸›à¹‚à¸ à¸„:

ðŸ’§ à¸™à¹‰à¸³à¸›à¸£à¸°à¸›à¸²:
ðŸ“ž à¹‚à¸—à¸£. 038-123456 à¸•à¹ˆà¸­ 201
ðŸ“± Line Official: @banpho-water
â° 24 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡ (à¸à¸£à¸“à¸µà¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™)

âš¡ à¹„à¸Ÿà¸Ÿà¹‰à¸²:
ðŸ“ž à¸à¸²à¸£à¹„à¸Ÿà¸Ÿà¹‰à¸²à¸ªà¹ˆà¸§à¸™à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„: 1129
ðŸ“ž à¹€à¸—à¸¨à¸šà¸²à¸¥ (à¹„à¸Ÿà¸Ÿà¹‰à¸²à¸ªà¸²à¸˜à¸²à¸£à¸“à¸°): 038-123456 à¸•à¹ˆà¸­ 202

ðŸ›£ï¸ à¸–à¸™à¸™/à¸—à¹ˆà¸­à¸£à¸°à¸šà¸²à¸¢à¸™à¹‰à¸³:
ðŸ“ž à¹‚à¸—à¸£. 038-123456 à¸•à¹ˆà¸­ 203
ðŸ“§ à¸­à¸µà¹€à¸¡à¸¥: public@banpho.go.th

ðŸ“‹ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹à¸ˆà¹‰à¸‡:
- à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¸›à¸±à¸à¸«à¸²
- à¸¥à¸±à¸à¸©à¸“à¸°à¸›à¸±à¸à¸«à¸²
- à¹€à¸šà¸­à¸£à¹Œà¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¸¥à¸±à¸š`,
    tags: 'à¸™à¹‰à¸³à¸›à¸£à¸°à¸›à¸², à¹„à¸Ÿà¸Ÿà¹‰à¸², à¸–à¸™à¸™, à¹à¸ˆà¹‰à¸‡à¸›à¸±à¸à¸«à¸²',
    is_featured: false,
    display_order: 4
  },
  {
    category_name: 'à¸ªà¸§à¸±à¸ªà¸”à¸´à¸à¸²à¸£à¸ªà¸±à¸‡à¸„à¸¡',
    question: 'à¸ªà¸¡à¸±à¸„à¸£à¹€à¸šà¸µà¹‰à¸¢à¸¢à¸±à¸‡à¸Šà¸µà¸žà¸œà¸¹à¹‰à¸ªà¸¹à¸‡à¸­à¸²à¸¢à¸¸à¸•à¹‰à¸­à¸‡à¸—à¸³à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£?',
    answer: `ðŸ‘´ðŸ‘µ à¸à¸²à¸£à¸ªà¸¡à¸±à¸„à¸£à¹€à¸šà¸µà¹‰à¸¢à¸¢à¸±à¸‡à¸Šà¸µà¸žà¸œà¸¹à¹‰à¸ªà¸¹à¸‡à¸­à¸²à¸¢à¸¸:

âœ… à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´:
- à¸­à¸²à¸¢à¸¸ 60 à¸›à¸µà¸šà¸£à¸´à¸šà¸¹à¸£à¸“à¹Œà¸‚à¸¶à¹‰à¸™à¹„à¸›
- à¸¡à¸µà¸ªà¸±à¸à¸Šà¸²à¸•à¸´à¹„à¸—à¸¢
- à¸¡à¸µà¸ à¸¹à¸¡à¸´à¸¥à¸³à¹€à¸™à¸²à¹ƒà¸™à¹€à¸‚à¸•à¹€à¸—à¸¨à¸šà¸²à¸¥
- à¸£à¸²à¸¢à¹„à¸”à¹‰à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 100,000 à¸šà¸²à¸—/à¸›à¸µ

ðŸ“‹ à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡:
1. à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ (à¸‰à¸šà¸±à¸šà¸ˆà¸£à¸´à¸‡ + à¸ªà¸³à¹€à¸™à¸²)
2. à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸šà¹‰à¸²à¸™ (à¸‰à¸šà¸±à¸šà¸ˆà¸£à¸´à¸‡ + à¸ªà¸³à¹€à¸™à¸²)
3. à¸ªà¸¡à¸¸à¸”à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£ (à¸«à¸™à¹‰à¸²à¹à¸£à¸)
4. à¸£à¸¹à¸›à¸–à¹ˆà¸²à¸¢ 1 à¸™à¸´à¹‰à¸§ à¸ˆà¸³à¸™à¸§à¸™ 2 à¸£à¸¹à¸›

ðŸ“ à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¸ªà¸¡à¸±à¸„à¸£:
à¹€à¸—à¸¨à¸šà¸²à¸¥à¸•à¸³à¸šà¸¥à¸šà¹‰à¸²à¸™à¹‚à¸žà¸˜à¸´à¹Œ à¸Šà¸±à¹‰à¸™ 2 à¸à¹ˆà¸²à¸¢à¸ªà¸§à¸±à¸ªà¸”à¸´à¸à¸²à¸£à¸ªà¸±à¸‡à¸„à¸¡

ðŸ’° à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™:
- à¸­à¸²à¸¢à¸¸ 60-69 à¸›à¸µ: 600 à¸šà¸²à¸—/à¹€à¸”à¸·à¸­à¸™
- à¸­à¸²à¸¢à¸¸ 70-79 à¸›à¸µ: 700 à¸šà¸²à¸—/à¹€à¸”à¸·à¸­à¸™
- à¸­à¸²à¸¢à¸¸ 80-89 à¸›à¸µ: 800 à¸šà¸²à¸—/à¹€à¸”à¸·à¸­à¸™
- à¸­à¸²à¸¢à¸¸ 90 à¸›à¸µà¸‚à¸¶à¹‰à¸™à¹„à¸›: 1,000 à¸šà¸²à¸—/à¹€à¸”à¸·à¸­à¸™`,
    tags: 'à¹€à¸šà¸µà¹‰à¸¢à¸¢à¸±à¸‡à¸Šà¸µà¸ž, à¸œà¸¹à¹‰à¸ªà¸¹à¸‡à¸­à¸²à¸¢à¸¸, à¸ªà¸§à¸±à¸ªà¸”à¸´à¸à¸²à¸£',
    is_featured: true,
    display_order: 5
  },
  {
    category_name: 'à¸à¸²à¸£à¸¨à¸¶à¸à¸©à¸²',
    question: 'à¸¡à¸µà¸—à¸¸à¸™à¸à¸²à¸£à¸¨à¸¶à¸à¸©à¸²à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸”à¹‡à¸à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?',
    answer: `ðŸŽ“ à¸—à¸¸à¸™à¸à¸²à¸£à¸¨à¸¶à¸à¸©à¸²à¹€à¸—à¸¨à¸šà¸²à¸¥à¸•à¸³à¸šà¸¥à¸šà¹‰à¸²à¸™à¹‚à¸žà¸˜à¸´à¹Œ:

ðŸ’° à¸›à¸£à¸°à¹€à¸ à¸—à¸—à¸¸à¸™:
1. à¸—à¸¸à¸™à¹€à¸”à¹‡à¸à¸”à¸µ (à¸›.1-à¸¡.6): 2,000 à¸šà¸²à¸—/à¸›à¸µ
2. à¸—à¸¸à¸™à¹€à¸”à¹‡à¸à¹€à¸à¹ˆà¸‡ (à¹€à¸à¸£à¸”à¹€à¸‰à¸¥à¸µà¹ˆà¸¢ 3.50 à¸‚à¸¶à¹‰à¸™à¹„à¸›): 3,000 à¸šà¸²à¸—/à¸›à¸µ
3. à¸—à¸¸à¸™à¹€à¸”à¹‡à¸à¸¢à¸²à¸à¸ˆà¸™: 5,000 à¸šà¸²à¸—/à¸›à¸µ
4. à¸—à¸¸à¸™à¸£à¸°à¸”à¸±à¸šà¸­à¸¸à¸”à¸¡à¸¨à¸¶à¸à¸©à¸²: 10,000 à¸šà¸²à¸—/à¸›à¸µ

âœ… à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¸—à¸±à¹ˆà¸§à¹„à¸›:
- à¸¡à¸µà¸ à¸¹à¸¡à¸´à¸¥à¸³à¹€à¸™à¸²à¹ƒà¸™à¹€à¸‚à¸•à¹€à¸—à¸¨à¸šà¸²à¸¥
- à¸à¸³à¸¥à¸±à¸‡à¸¨à¸¶à¸à¸©à¸²à¸­à¸¢à¸¹à¹ˆ
- à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸—à¸¸à¸™à¸ˆà¸²à¸à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™à¸­à¸·à¹ˆà¸™

ðŸ“‹ à¹€à¸­à¸à¸ªà¸²à¸£à¸ªà¸¡à¸±à¸„à¸£:
1. à¹ƒà¸šà¸ªà¸¡à¸±à¸„à¸£ (à¸£à¸±à¸šà¸—à¸µà¹ˆà¹€à¸—à¸¨à¸šà¸²à¸¥)
2. à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸šà¹‰à¸²à¸™ + à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™
3. à¹ƒà¸šà¹à¸ªà¸”à¸‡à¸œà¸¥à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™
4. à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸£à¸±à¸šà¸£à¸­à¸‡à¸£à¸²à¸¢à¹„à¸”à¹‰à¸œà¸¹à¹‰à¸›à¸à¸„à¸£à¸­à¸‡
5. à¸£à¸¹à¸›à¸–à¹ˆà¸²à¸¢ 1 à¸™à¸´à¹‰à¸§ à¸ˆà¸³à¸™à¸§à¸™ 2 à¸£à¸¹à¸›

ðŸ“… à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¸ªà¸¡à¸±à¸„à¸£:
à¹€à¸”à¸·à¸­à¸™à¸¡à¸µà¸™à¸²à¸„à¸¡ - à¹€à¸¡à¸©à¸²à¸¢à¸™ à¸‚à¸­à¸‡à¸—à¸¸à¸à¸›à¸µ`,
    tags: 'à¸—à¸¸à¸™à¸à¸²à¸£à¸¨à¸¶à¸à¸©à¸², à¹€à¸”à¹‡à¸, à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™',
    is_featured: false,
    display_order: 6
  },
  {
    category_name: 'à¸à¸²à¸£à¸‚à¸­à¸­à¸™à¸¸à¸à¸²à¸•',
    question: 'à¸‚à¸­à¸­à¸™à¸¸à¸à¸²à¸•à¸à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡à¸šà¹‰à¸²à¸™à¸•à¹‰à¸­à¸‡à¸—à¸³à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£?',
    answer: `ðŸ  à¸à¸²à¸£à¸‚à¸­à¸­à¸™à¸¸à¸à¸²à¸•à¸à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡à¸šà¹‰à¸²à¸™:

ðŸ“‹ à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡:
1. à¹à¸šà¸šà¹à¸›à¸¥à¸™à¸à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡ (à¹‚à¸”à¸¢à¸ªà¸–à¸²à¸›à¸™à¸´à¸/à¸§à¸´à¸¨à¸§à¸à¸£)
2. à¹‚à¸‰à¸™à¸”à¸—à¸µà¹ˆà¸”à¸´à¸™ à¸«à¸£à¸·à¸­ à¸™.à¸ª.3
3. à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¸—à¸µà¹ˆà¸”à¸´à¸™
4. à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸¡à¸­à¸šà¸­à¸³à¸™à¸²à¸ˆ (à¸–à¹‰à¸²à¸¡à¸µ)
5. à¹ƒà¸šà¸­à¸™à¸¸à¸à¸²à¸•à¸›à¸£à¸°à¸à¸­à¸šà¸§à¸´à¸Šà¸²à¸Šà¸µà¸ž (à¸ªà¸–à¸²à¸›à¸™à¸´à¸/à¸§à¸´à¸¨à¸§à¸à¸£)

ðŸ’° à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡:
- à¸šà¹‰à¸²à¸™à¹€à¸”à¸µà¹ˆà¸¢à¸§: 500-2,000 à¸šà¸²à¸— (à¸•à¸²à¸¡à¸‚à¸™à¸²à¸”)
- à¸­à¸²à¸„à¸²à¸£à¸žà¸²à¸“à¸´à¸Šà¸¢à¹Œ: 1,000-5,000 à¸šà¸²à¸—

â±ï¸ à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£:
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸­à¸à¸ªà¸²à¸£: 7-15 à¸§à¸±à¸™
- à¸­à¸­à¸à¹ƒà¸šà¸­à¸™à¸¸à¸à¸²à¸•: 30 à¸§à¸±à¸™

ðŸ“ž à¸ªà¸­à¸šà¸–à¸²à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
à¸à¹ˆà¸²à¸¢à¹‚à¸¢à¸˜à¸² à¹‚à¸—à¸£. 038-123456 à¸•à¹ˆà¸­ 301

âš ï¸ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:
à¸•à¹‰à¸­à¸‡à¹€à¸£à¸´à¹ˆà¸¡à¸à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡à¸ à¸²à¸¢à¹ƒà¸™ 1 à¸›à¸µ à¸«à¸¥à¸±à¸‡à¹„à¸”à¹‰à¸£à¸±à¸šà¸­à¸™à¸¸à¸à¸²à¸•`,
    tags: 'à¹ƒà¸šà¸­à¸™à¸¸à¸à¸²à¸•, à¸à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡, à¸šà¹‰à¸²à¸™',
    is_featured: false,
    display_order: 7
  },
  {
    category_name: 'à¸ªà¸´à¹ˆà¸‡à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡',
    question: 'à¸§à¸±à¸™à¹„à¸«à¸™à¹€à¸à¹‡à¸šà¸‚à¸¢à¸° à¹à¸¥à¸°à¸•à¹‰à¸­à¸‡à¹à¸¢à¸à¸‚à¸¢à¸°à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£?',
    answer: `ðŸ—‘ï¸ à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¸¢à¸°à¹€à¸—à¸¨à¸šà¸²à¸¥à¸•à¸³à¸šà¸¥à¸šà¹‰à¸²à¸™à¹‚à¸žà¸˜à¸´à¹Œ:

ðŸ“… à¸•à¸²à¸£à¸²à¸‡à¹€à¸à¹‡à¸šà¸‚à¸¢à¸°:
- à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œ, à¸žà¸¸à¸˜, à¸¨à¸¸à¸à¸£à¹Œ: à¸‚à¸¢à¸°à¸—à¸±à¹ˆà¸§à¹„à¸›
- à¸§à¸±à¸™à¸­à¸±à¸‡à¸„à¸²à¸£: à¸‚à¸¢à¸°à¸£à¸µà¹„à¸‹à¹€à¸„à¸´à¸¥
- à¸§à¸±à¸™à¹€à¸ªà¸²à¸£à¹Œ: à¸‚à¸¢à¸°à¸­à¸´à¸™à¸—à¸£à¸µà¸¢à¹Œ

ðŸ• à¹€à¸§à¸¥à¸²à¹€à¸à¹‡à¸šà¸‚à¸¢à¸°:
06:00 - 10:00 à¸™. (à¸§à¸²à¸‡à¸‚à¸¢à¸°à¸à¹ˆà¸­à¸™ 06:00 à¸™.)

â™»ï¸ à¸à¸²à¸£à¹à¸¢à¸à¸‚à¸¢à¸°:
ðŸŸ¢ à¸‚à¸¢à¸°à¸­à¸´à¸™à¸—à¸£à¸µà¸¢à¹Œ (à¸–à¸¸à¸‡à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§):
- à¹€à¸¨à¸©à¸­à¸²à¸«à¸²à¸£, à¹ƒà¸šà¹„à¸¡à¹‰, à¹€à¸›à¸¥à¸·à¸­à¸à¸œà¸¥à¹„à¸¡à¹‰

ðŸ”µ à¸‚à¸¢à¸°à¸£à¸µà¹„à¸‹à¹€à¸„à¸´à¸¥ (à¸–à¸¸à¸‡à¸ªà¸µà¸™à¹‰à¸³à¹€à¸‡à¸´à¸™):
- à¸à¸£à¸°à¸”à¸²à¸©, à¸žà¸¥à¸²à¸ªà¸•à¸´à¸, à¹à¸à¹‰à¸§, à¹‚à¸¥à¸«à¸°

ðŸ”´ à¸‚à¸¢à¸°à¸—à¸±à¹ˆà¸§à¹„à¸› (à¸–à¸¸à¸‡à¸ªà¸µà¹à¸”à¸‡):
- à¸‚à¸¢à¸°à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸£à¸µà¹„à¸‹à¹€à¸„à¸´à¸¥à¹„à¸”à¹‰

âš ï¸ à¸‚à¸¢à¸°à¸­à¸±à¸™à¸•à¸£à¸²à¸¢:
- à¸–à¹ˆà¸²à¸™à¹„à¸Ÿà¸‰à¸²à¸¢, à¸«à¸¥à¸­à¸”à¹„à¸Ÿ, à¸¢à¸²
- à¸™à¸³à¸ªà¹ˆà¸‡à¸—à¸µà¹ˆà¹€à¸—à¸¨à¸šà¸²à¸¥à¹‚à¸”à¸¢à¸•à¸£à¸‡

ðŸ“ž à¹à¸ˆà¹‰à¸‡à¸›à¸±à¸à¸«à¸²: 038-123456 à¸•à¹ˆà¸­ 204`,
    tags: 'à¸‚à¸¢à¸°, à¹à¸¢à¸à¸‚à¸¢à¸°, à¸ªà¸´à¹ˆà¸‡à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡',
    is_featured: true,
    display_order: 8
  }
];

export async function POST(request) {
  let connection;
  
  try {
    connection = await mysql.createConnection(dbConfig);
    
    // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
    const [existingItems] = await connection.execute(
      'SELECT COUNT(*) as count FROM qa_items'
    );
    
    if (existingItems[0].count > 0) {
      return NextResponse.json({
        success: false,
        message: 'Sample Q&A items already exist. Use force=true to recreate.',
        existing_count: existingItems[0].count
      });
    }
    
    // à¹€à¸£à¸´à¹ˆà¸¡ transaction
    await connection.beginTransaction();
    
    const insertedItems = [];
    
    // Insert Q&A items
    for (const item of sampleQAItems) {
      // à¸«à¸² category_id à¸ˆà¸²à¸à¸Šà¸·à¹ˆà¸­à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
      const [categories] = await connection.execute(
        'SELECT id FROM qa_categories WHERE category_name = ?',
        [item.category_name]
      );
      
      if (categories.length === 0) {
        console.warn(`Category not found: ${item.category_name}`);
        continue;
      }
      
      const categoryId = categories[0].id;
      
      const [result] = await connection.execute(`
        INSERT INTO qa_items (
          category_id,
          question,
          answer,
          tags,
          is_active,
          is_featured,
          display_order,
          view_count,
          created_at,
          updated_at
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())
      `, [
        categoryId,
        item.question,
        item.answer,
        item.tags,
        true,
        item.is_featured,
        item.display_order,
        Math.floor(Math.random() * 100) + 10 // Random view count 10-109
      ]);
      
      insertedItems.push({
        id: result.insertId,
        category_id: categoryId,
        category_name: item.category_name,
        question: item.question,
        answer: item.answer,
        tags: item.tags,
        is_featured: item.is_featured,
        display_order: item.display_order
      });
    }
    
    // Commit transaction
    await connection.commit();
    
    return NextResponse.json({
      success: true,
      message: `Successfully seeded ${insertedItems.length} Q&A items`,
      data: insertedItems,
      summary: {
        total_inserted: insertedItems.length,
        featured_items: insertedItems.filter(item => item.is_featured).length,
        categories_used: [...new Set(insertedItems.map(item => item.category_name))].length
      }
    });

  } catch (error) {
    // Rollback transaction on error
    if (connection) {
      try {
        await connection.rollback();
      } catch (rollbackError) {
        console.error('Rollback error:', rollbackError);
      }
    }
    
    console.error('Seed Q&A items error:', error);
    return NextResponse.json(
      { 
        success: false, 
        error: 'Failed to seed Q&A items',
        details: error.message 
      },
      { status: 500 }
    );
  } finally {
    if (connection) {
      await connection.end();
    }
  }
}

// DELETE - à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹à¸¥à¸° seed à¹ƒà¸«à¸¡à¹ˆ
export async function DELETE(request) {
  let connection;
  
  try {
    const url = new URL(request.url);
    const force = url.searchParams.get('force') === 'true';
    
    if (!force) {
      return NextResponse.json({
        success: false,
        message: 'Add ?force=true to confirm deletion and re-seeding'
      }, { status: 400 });
    }
    
    connection = await mysql.createConnection(dbConfig);
    
    // à¹€à¸£à¸´à¹ˆà¸¡ transaction
    await connection.beginTransaction();
    
    // à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
    await connection.execute('DELETE FROM qa_submitters');
    await connection.execute('DELETE FROM qa_items');
    
    // Reset AUTO_INCREMENT
    await connection.execute('ALTER TABLE qa_items AUTO_INCREMENT = 1');
    
    const insertedItems = [];
    
    // Insert Q&A items à¹ƒà¸«à¸¡à¹ˆ
    for (const item of sampleQAItems) {
      // à¸«à¸² category_id à¸ˆà¸²à¸à¸Šà¸·à¹ˆà¸­à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
      const [categories] = await connection.execute(
        'SELECT id FROM qa_categories WHERE category_name = ?',
        [item.category_name]
      );
      
      if (categories.length === 0) {
        console.warn(`Category not found: ${item.category_name}`);
        continue;
      }
      
      const categoryId = categories[0].id;
      
      const [result] = await connection.execute(`
        INSERT INTO qa_items (
          category_id,
          question,
          answer,
          tags,
          is_active,
          is_featured,
          display_order,
          view_count,
          created_at,
          updated_at
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())
      `, [
        categoryId,
        item.question,
        item.answer,
        item.tags,
        true,
        item.is_featured,
        item.display_order,
        Math.floor(Math.random() * 100) + 10
      ]);
      
      insertedItems.push({
        id: result.insertId,
        category_id: categoryId,
        category_name: item.category_name,
        question: item.question,
        is_featured: item.is_featured
      });
    }
    
    // Commit transaction
    await connection.commit();
    
    return NextResponse.json({
      success: true,
      message: `Successfully re-seeded ${insertedItems.length} Q&A items`,
      data: insertedItems,
      summary: {
        total_inserted: insertedItems.length,
        featured_items: insertedItems.filter(item => item.is_featured).length,
        categories_used: [...new Set(insertedItems.map(item => item.category_name))].length
      }
    });

  } catch (error) {
    // Rollback transaction on error
    if (connection) {
      try {
        await connection.rollback();
      } catch (rollbackError) {
        console.error('Rollback error:', rollbackError);
      }
    }
    
    console.error('Re-seed Q&A items error:', error);
    return NextResponse.json(
      { 
        success: false, 
        error: 'Failed to re-seed Q&A items',
        details: error.message 
      },
      { status: 500 }
    );
  } finally {
    if (connection) {
      await connection.end();
    }
  }
}